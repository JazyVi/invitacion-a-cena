<!DOCTYPE html>
<html lang="es">
<head>
  <!-- ü•ö Gracias por mirar el c√≥digo. As√≠ como t√∫, todo lo bueno est√° detr√°s de lo obvio. -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Una invitaci√≥n silenciosa</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    body {
      margin: 0;
      font-family: 'Nunito', sans-serif;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      text-align: center;
      padding: 2rem;
      position: relative;
      overflow: hidden;
    }
    video#fondo-video {
      position: fixed;
      top: 0; left: 0;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      z-index: -1;
      filter: brightness(0.6) blur(1px);
    }
    .container, .step2, .message-box {
      background: rgba(34, 40, 49, 0.6);
      padding: 2rem;
      border-radius: 1rem;
      max-width: 500px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      margin-top: 1rem;
      animation: fadeIn 2s ease-in-out;
    }
    h1 { font-size: 1.6rem; margin-bottom: 1rem; color: #fff; }
    p { margin-bottom: 1rem; font-size: 1rem; line-height: 1.6; }
    button {
      background-color: #7b2c44;
      color: #fffaf0;
      border: 1px solid #ffffff22;
      padding: 0.8rem 1.2rem;
      margin: 0.5rem;
      border-radius: 0.5rem;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s ease, transform 0.2s ease;
    }
    button:hover {
      background-color: #d67c9d;
      transform: scale(1.05);
    }
    .hidden { display: none; }
    #eggMensajeCuriosidad {
      display: none;
      font-style: italic;
      color: #fffbe0;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <video autoplay muted loop id="fondo-video">
    <source src="fondo-luna.mp4" type="video/mp4" />
  </video>

  <div class="container" id="step1" style="text-align: left;">
    <h1 style="text-align: center;">Hola Alain ü§ó</h1>
    <p style="font-style: italic; font-size: 1.05rem; color: #eee;">A veces el c√≥digo se corrompe con emociones ...</p>
    <p style="height: 1rem;"></p>
    <p>üçΩÔ∏è Esta vez, solo quiero invitarte a una cena hecha con calma y gratitud.<br/>
    üîá ü§´ Sin palabras, sin presiones.<br/>
    üë©‚Äçüç≥ Solo t√∫, yo, y unos platos bien pensados.</p>
    <p style="margin-top: 2rem;">¬øEjecutar√≠as una cena.exe conmigo?</p>
    <div style="text-align: center;">
      <button onclick="aceptar()">‚ñ∂ Ejecutar protocolo.cena()</button>
      <button onclick="rechazar()">‚ùå Terminar proceso</button>
    </div>
  </div>

  <div class="step2 hidden" id="step2">
    <p id="eggMensajeCuriosidad">Me encanta tu curiosidad, siempre me cautiv√≥ desde esa mirada misteriosa tan tuya.</p>
    <p id="mensaje-fecha">Elige la fecha en que quieras ejecutar la funci√≥n:</p>
    <form name="invitacion">
      <input type="hidden" name="respuesta" id="respuestaSeleccion" />
      <button type="button" onclick="seleccionarFecha('12/07 - 18:00 a 20:00 hrs')">12/07 - 18:00 a 20:00 hrs</button>
      <button type="button" onclick="seleccionarFecha('13/07 - 18:00 a 20:00 hrs')">13/07 - 18:00 a 20:00 hrs</button>
    </form>
  </div>

  <div class="message-box hidden" id="respuesta"></div>
  
  <!-- Juego del Chihuahua Runner (aparece tras rechazar) -->
  <canvas id="gameCanvas" width="800" height="200" class="hidden" style="margin-top: 2rem; border-radius: 1rem;"></canvas>


  <!-- Vista Chihuahua 2.0 (activa con la tecla J) -->
  <div id="vistaChihuahua2" class="hidden" style="margin-top: 2rem; background: rgba(34,40,49,0.6); padding: 2rem; border-radius: 1rem; max-width: 500px; animation: fadeIn 2s ease-in-out;">
    <div style="display: flex; align-items: center; gap: 1rem;">
      <p><strong>¬øTienes m√°s curiosidad...?</strong></p>
      <button id="chihuahua-btn" onclick="mostrarReglas()" title="Haz clic si te atreves üê∂"
        style="width: 50px; height: 50px; background: url('chihuahua-kawaii.png') center/cover no-repeat;
        border: none; border-radius: 50%; cursor: pointer; transition: transform 0.4s ease;">
      </button>
    </div>
  </div>

  <!-- Reglas ocultas -->
  <div class="chihuahua-secret hidden" id="chihuahuaBox" style="text-align: left; background: rgba(255, 255, 255, 0.07); padding: 1.5rem; border-radius: 1rem; color: #ffe7f1;">
  <p style="font-size: 1.1rem;"><strong>üå∏ Condiciones para ejecutar la cena.exe</strong></p>
  <ul style="text-align: left; line-height: 1.7;">
    <li>üîá No se permite hablar (puedes usar sonidos misteriosos opcionales ü§´)</li>
    <li>üìµ Nada de escribir, ni papelitos ni WhatsApp. Tu cerebro ser√° tu √∫nico mensajero üß†</li>
    <li>üëÄ Comunicaci√≥n permitida: miradas largas, silencios compartidos y sonrisas tontas</li>
    <li>üïäÔ∏è Reglas creadas en lenguaje no verbal compilado por Jazm√≠nOS v2.0</li>
  </ul>
  <p style="font-style: italic; margin-top: 1rem; font-size: 0.95rem;">
    Porque a veces, lo m√°s bonito no necesita palabras üíå
  </p>
</div>

  <script>
    function aceptar() {
      document.getElementById("step1").classList.add("hidden");
      document.getElementById("step2").classList.remove("hidden");
    }

    function rechazar() {
      const formURL = "https://formspree.io/f/xjkrjowd";
      const data = new FormData();
      data.append("acepta", "No");
      fetch(formURL, { method: "POST", mode: "no-cors", body: data });
      document.getElementById("step1").classList.add("hidden");
      document.getElementById("respuesta").innerHTML = "De lo que te pierdes üíî";
      document.getElementById("respuesta").classList.remove("hidden");

      iniciarJuego(); // <-- activa el juego

      function iniciarJuego() {
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");
  canvas.classList.remove("hidden");

  let chihuahua = { x: 50, y: 150, width: 40, height: 40, vy: 0, jumping: false };
  let gravity = 1.5;
  let obstacles = [];
  let score = 0;
  let gameOver = false;

  function drawChihuahua() {
    ctx.fillStyle = "#FFD7DC";
    ctx.fillRect(chihuahua.x, chihuahua.y, chihuahua.width, chihuahua.height);
  }

  function drawObstacle(ob) {
    ctx.fillStyle = "#ffaa66";
    ctx.fillRect(ob.x, ob.y, ob.width, ob.height);
    ctx.font = "18px Nunito";
    ctx.fillStyle = "#fff";
    ctx.fillText("üçÑ", ob.x + 5, ob.y - 5);
  }

  function update() {
    if (gameOver) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    chihuahua.vy += gravity;
    chihuahua.y += chihuahua.vy;

    if (chihuahua.y > 150) {
      chihuahua.y = 150;
      chihuahua.vy = 0;
      chihuahua.jumping = false;
    }

    drawChihuahua();

    for (let ob of obstacles) {
      ob.x -= 5;
      drawObstacle(ob);

      if (
        chihuahua.x < ob.x + ob.width &&
        chihuahua.x + chihuahua.width > ob.x &&
        chihuahua.y < ob.y + ob.height &&
        chihuahua.y + chihuahua.height > ob.y
      ) {
        gameOver = true;
      }
    }

    ctx.fillStyle = "#fff";
    ctx.font = "16px Nunito";
    ctx.fillText("Puntos: " + score, 10, 20);

    if (Math.random() < 0.02) {
      obstacles.push({ x: canvas.width, y: 160, width: 30, height: 40 });
    }

    obstacles = obstacles.filter(ob => ob.x + ob.width > 0);
    score++;

    if (!gameOver) {
      requestAnimationFrame(update);
    } else {
      ctx.fillStyle = "#ffbdbd";
      ctx.font = "20px Nunito";
      ctx.fillText("¬°Ups! El chihuahua tropez√≥ con un hongo üçÑ", 200, 100);
      ctx.fillText("Presiona R para reiniciar", 280, 130);
    }
  }

  document.addEventListener("keydown", function(e) {
    if (e.code === "Space" && !chihuahua.jumping) {
      chihuahua.vy = -20;
      chihuahua.jumping = true;
    }
    if (e.key.toLowerCase() === "r" && gameOver) {
      chihuahua.y = 150;
      chihuahua.vy = 0;
      obstacles = [];
      score = 0;
      gameOver = false;
      update();
    }
  });

  update();
}

    }

    function seleccionarFecha(fecha) {
      const formURL = "https://formspree.io/f/xjkrjowd";
      const data = new FormData();
      data.append("acepta", "S√≠");
      data.append("fecha", fecha);
      fetch(formURL, { method: "POST", mode: "no-cors", body: data });
      document.querySelector("form").classList.add("hidden");
      document.getElementById("mensaje-fecha").style.display = "none";
      document.getElementById("respuesta").innerHTML = "Nos vemos el d√≠a que elegiste. Gracias por tu tiempo y curiosidad üçÉ";
      document.getElementById("respuesta").classList.remove("hidden");
    }

    function mostrarReglas() {
      document.getElementById("vistaChihuahua2").classList.add("hidden");
      document.getElementById("chihuahuaBox").classList.remove("hidden");
    }

    document.addEventListener("keydown", function (e) {
      if (e.key.toLowerCase() === 'a') {
        const egg = document.getElementById("eggMensajeCuriosidad");
        if (egg) egg.style.display = "block";
      }
      if (e.key.toLowerCase() === 'j') {
        const chihuahua2 = document.getElementById("vistaChihuahua2");
        if (chihuahua2) {
          chihuahua2.classList.remove("hidden");
          chihuahua2.style.animation = "fadeIn 2s ease-in-out";
        }
      }
    });
  </script>
</body>
</html>
